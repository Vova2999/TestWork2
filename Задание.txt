Основные задачи:

1) Создать класс ComplexMap
2) Запустить тесты и убедиться в том, что все работает правильно. Тестовые сценарии и код main я выдам


Методы класса:

1) int GetSize()
 - получить количество элементов в ComplexMap

2) void AddValue(Tkey key, TValue value)
 - добавить значение value по ключу key. В случае, если по переданному ключу уже есть значение, то бросить исключение
3) void AddArray(Tkey key, TValue* values, int size)
 - добавить массив values по ключу key. В случае, если по переданному ключу уже есть массив, то бросить исключение
4) void AddString(Tkey key, char* line)
 - добавить строку line по ключу key. В случае, если по переданному ключу уже есть строка, то бросить исключение

5) bool TryAddValue(Tkey key, TValue value)
 - добавить значение value по ключу key. В случае, если по переданному ключу уже есть значение, то оставить его без изменений и вернуть false
6) bool TryAddArray(Tkey key, TValue* values, int size)
 - добавить массив values по ключу key. В случае, если по переданному ключу уже есть значение, то оставить его без изменений и вернуть false
7) bool TryAddString(Tkey key, const char* line)
 - добавить строку line по ключу key. В случае, если по переданному ключу уже есть значение, то оставить его без изменений и вернуть false

8) void AddValueOrReplace(int key, TValue value)
 - добавить значение value по ключу key. В случае, если по переданному ключу уже есть значение, то заменить его
9) void AddArrayOrReplace(int key, TValue* values, int size)
 - добавить массив values по ключу key. В случае, если по переданному ключу уже есть значение, то заменить его
10) void AddStringOrReplace(int key, char* line)
 - добавить строку line по ключу key. В случае, если по переданному ключу уже есть значение, то заменить его

11) TValue GetValue(Tkey key)
 - получить значение по ключу key. В случае, если по переданному ключу нет значения, то бросить исключение. В случае, если по переданному ключу лежит не значение (например, лежит массив или строка), то бросить исключение, отличное от исключения отсутствия ключа
12) TValue* GetArray(Tkey key, int* size)
 - получить массив по ключу key. В случае, если по переданному ключу нет массива, то бросить исключение. В случае, если по переданному ключу лежит не массив (например, лежит значение или строка), то бросить исключение, отличное от исключения отсутствия ключа
13) char* GetString(Tkey key)
 - получить строку по ключу key. В случае, если по переданному ключу нет строки, то бросить исключение. В случае, если по переданному ключу лежит не строка (например, лежит значение или массив), то бросить исключение, отличное от исключения отсутствия ключа

14) bool TryGetValue(Tkey key, TValue* value)
 - получить значение по ключу key. В случае успеха возвращается true и значение в TValue* value. В случае, если по переданному ключу нет значения, то вернуть false. В случае, если по переданному ключу лежит не TValue (например, лежит массив или строка), то вернуть false
15) bool TryGetArray(Tkey key, TValue** values, int* size)
 - получить массив по ключу key. В случае успеха возвращается true, массив в TValue** values и его размер в int* size. В случае, если по переданному ключу нет значения, то вернуть false. В случае, если по переданному ключу лежит не массив (например, лежит значение или строка), то вернуть false
16) bool TryGetString(Tkey key, char** line)
 - получить строку по ключу key. В случае успеха возвращается true и строка в char** line. В случае, если по переданному ключу нет строки, то вернуть false. В случае, если по переданному ключу лежит не строка (например, лежит значение или массив), то вернуть false

17) TValue GetOrAddValue(Tkey key, TValue value)
 - получить значение по ключу key. В случае, если по переданному ключу нет значения, то добавить значение value. В случае, если по переданному ключу лежит не значение (например, лежит массив или строка), то бросить исключение, отличное от исключения отсутствия ключа
18) TValue* GetOrAddArray(Tkey key, int* resultSize, TValue* values, int size)
 - получить значение по ключу key. В случае, если по переданному ключу нет значения, то добавить массив values. В случае, если по переданному ключу лежит не массив (например, лежит значение или строка), то бросить исключение, отличное от исключения отсутствия ключа
19) char* GetOrAddString(Tkey key, const char* line)
 - получить значение по ключу key. В случае, если по переданному ключу нет значения, то добавить строку line. В случае, если по переданному ключу лежит не строка (например, лежит значение или массив), то бросить исключение, отличное от исключения отсутствия ключа

20) void Remove(Tkey key)
 - удалить по ключу. В случае, если по ключу ничего нет, то бросить исключение
21) bool TryRemove(Tkey key)
 - удалить по ключу. В случае успеха вернуть true. В случае, если по ключу ничего нет, то вернуть false
22) void RemoveAll()
 - удалить все записи


Подсказки:

Внутри ComplexMap должен быть map<Tkey, ValueType*> valuesMap
ValueType - базовый класс для классов SingleValueType, ArrayValueType и StringValueType. Эти классы представляют различные типы хранимых данных
При добавлении массива и строки значение должно быть перекопированно в ArrayValueType и StringValueType, чтобы при удалении массива извне он не удалился из ComplexMap (на это есть тесты в методе RemoveTempMemory)
Для Add/Get методов можно сделать вспомогательные приватные методы, чтобы не было дублирования кода. Для Get методов можно ввести еще один template. Например, сигнатура вспомогательного метода Get может быть такой: template<typename TValueType> TValueType* GetValueType(Tkey key), где TValueType - какой-либо наследник ValueType
Не забудьте про деструкторы!
